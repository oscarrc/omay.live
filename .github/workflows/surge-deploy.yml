name: Surge Deploy
on:
  push:
    tags:        
      - 'v*'
jobs:
    build:
        runs-on: ubuntu-latest
        name: Deploying to surge        
        steps:
            - uses: actions/checkout@v4
              with:
                sparse-checkout: |
                  app
            - uses: actions/setup-node@v4
              with:
                node-version: 18
            - run: npm --prefix ./app install
            - run: npm --prefix ./app build            
            - run: npm install -g surge
            - run: surge ./app/dist ${{ secrets.SURGE_DOMAIN }} --token ${{ secrets.SURGE_TOKEN }}